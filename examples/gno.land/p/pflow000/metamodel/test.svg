<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
    <script type="application/ld+json">
        {
            "@context": "https://pflow.yz/schema",
            "@type": "PetriNet",
            "modelType": "PetriNet",
            "version": "v1",
            "tokens": ["black"],
            "places": {
                "place0": {
                    "@id": "place0",
                    "@type": "Place",
                    "name": "User Wallet",
                    "identifier": "place0",
                    "description": "Holds user balance in native token",
                    "offset": 0,
                    "initial": [1],
                    "capacity": [3],
                    "x": 130,
                    "y": 207,
                    "token": {
                        "@type": "PropertyValue",
                        "name": "Token",
                        "ticker": "ATOM",
                        "denomination": "uatom"
                    }
                }
            },
            "transitions": {
                "txn1": {
                    "@id": "txn1",
                    "@type": "Transition",
                    "x": 227,
                    "y": 112,
                    "action": {
                        "@type": "TransferAction",
                        "agent": {
                            "@type": "Person",
                            "name": "System"
                        },
                        "object": {
                            "@type": "PropertyValue",
                            "name": "Token",
                            "value": 3
                        },
                        "recipient": {
                            "@type": "Place",
                            "name": "place0"
                        },
                        "description": "System transfers 3 tokens to place0"
                    }
                }
            },
            "arcs": [
                {
                    "@type": "Arrow",
                    "name": "Consumption Arc",
                    "description": "Consumes 1 token from txn0 to place0",
                    "source": { "@id": "txn0" },
                    "target": { "@id": "place0" },
                    "weight": [
                        {
                            "@type": "PropertyValue",
                            "name": "black",
                            "value": 1
                        }
                    ]
                },
                {
                    "@type": "Arrow",
                    "name": "Forward Arc",
                    "description": "Moves 3 tokens from place0 to txn1",
                    "source": { "@id": "place0" },
                    "target": { "@id": "txn1" },
                    "weight": [
                        {
                            "@type": "PropertyValue",
                            "name": "black",
                            "value": 3
                        }
                    ]
                },
                {
                    "@type": "Arrow",
                    "name": "Inhibitor Arc",
                    "description": "Prevents txn2 from firing if place0 has 3 tokens",
                    "arcType": "inhibitor",
                    "function": "disableWhenTokensPresent",
                    "source": { "@id": "txn2" },
                    "target": { "@id": "place0" },
                    "inhibitTransition": true,
                    "weight": [
                        {
                            "@type": "PropertyValue",
                            "name": "black",
                            "value": 3
                        }
                    ]
                },
                {
                    "@type": "Arrow",
                    "name": "Inhibitor Arc",
                    "description": "Blocks txn3 if place0 is not empty",
                    "arcType": "inhibitor",
                    "function": "disableWhenTokensPresent",
                    "source": { "@id": "place0" },
                    "target": { "@id": "txn3" },
                    "inhibitTransition": true,
                    "weight": [
                        {
                            "@type": "PropertyValue",
                            "name": "black",
                            "value": 1
                        }
                    ]
                }
            ]
        }
    </script>

    <defs>
        <marker id="arrow" markerWidth="22.5" markerHeight="12" refX="9" refY="6.5" orient="auto">
            <path d="M3,1.5 L3,12 L10.5,6 L3,1.5"/>
        </marker>
        <marker id="inhibit" markerWidth="30" markerHeight="16" refX="10" refY="8.5" orient="auto">
            <circle cx="8" cy="9" r="4"/>
        </marker>
    </defs>

    <circle cx="130" cy="207" r="20" fill="black"/>
    <text x="120" y="212" font-size="12" fill="white">1</text>

    <rect x="227" y="112" width="40" height="20" fill="gray"/>

    <line x1="50" y1="100" x2="130" y2="207" stroke="black" marker-end="url(#arrow)"/>
    <line x1="130" y1="207" x2="227" y2="112" stroke="black" marker-end="url(#arrow)"/>
    <line x1="300" y1="100" x2="130" y2="207" stroke="black" marker-end="url(#inhibit)"/>
    <line x1="130" y1="207" x2="400" y2="100" stroke="black" marker-end="url(#inhibit)"/>
</svg>